angular.module("PlantsApp",["ionic","ui.router"]),function(){angular.module("PlantsApp").config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("","/list"),b.when("/","/list"),a.state("list",{url:"/list",controller:"PlantListCtrl",templateUrl:"app/components/plant/list.html"}),a.state("detail",{url:"/detail/{code}",controller:"PlantDetailCtrl",templateUrl:"app/components/plant/detail.html"})}])}(),function(){function a(a,b,c,d){var e=b.code;a.flickr=d,a.getPhotoUrl=d.getPhotoUrl,c().success(function(b){for(var c=0;c<b.length;++c){var f=b[c];if(f.code==e){a.plant=f,console.log("DetailCtrl done",f),d.query(f.scientific,function(b){console.log("Flickr done",b);var c=d.getPhotos(b);a.photos=c,c.length>0&&(a.thumbnail=d.getPhotoUrl(c[0],d.SMALL),a.caption=c[0].title)});break}}})}angular.module("PlantsApp").controller("PlantDetailCtrl",["$scope","$stateParams","plantList","flickr",a])}(),function(){function a(a,b){b().success(function(b){a.plants=b,console.log("PlantListCtrl done",b)})}angular.module("PlantsApp").controller("PlantListCtrl",["$scope","plantList",a])}(),function(){function a(a,b){var c={THUMB:"t",SMALL:"m",MEDIUM:"z",LARGE:"b",getServiceUrl:function(a){return"https://www.flickr.com/services/rest/?method="+a},query:function(d,e){b.load(function(){var f=c.getServiceUrl("flickr.photos.search")+"&sort=relevance&per_page=10&format=json&text="+d+"&api_key="+b.get("flickr_api_key");return a.jsonp(f+"&jsoncallback=JSON_CALLBACK").success(e)})},getPhotos:function(a){return"ok"!=a.stat?[]:a.photos.photo},getPhotoUrl:function(a,b){return"https://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_"+(b||c.THUMB)+".jpg"}};return c}angular.module("PlantsApp").factory("flickr",["$http","config",a])}(),function(){function a(a){var b=null;return function(){return b||(b=a.get("assets/json/plants.json"),console.log("Getting plants list")),b}}angular.module("PlantsApp").factory("plantList",["$http",a])}(),function(){function a(){var a={_config:{},get:function(b){return a._config[b]||JSON.parse(localStorage.getItem("config-"+b))},set:function(b,c){a._config[b]=c,localStorage.setItem("config-"+b,JSON.stringify(c))},hasConfig:function(){return null!=a.get("version")},load:function(b){a.hasConfig()?b(a):a.update(b)},update:function(b){b(a)}};return a}angular.module("PlantsApp").factory("config",a)}(),angular.module("PlantsApp").run(["$templateCache",function(a){"use strict";a.put("app/components/plant/detail.html","<ion-view><ion-nav-title>{{ plant.scientific }}</ion-nav-title><ion-content><h2>{{ plant.scientific }}</h2><h3>{{ plant.common }}</h3><div class=plant-detail><div class=row><div class=col>Code</div><div class=col>{{ plant.code }}</div></div><div class=row><div class=col>Family</div><div class=col>{{ plant.family }} ({{ plant.familyCommon }})</div></div><div class=row><div class=col>Growth Form</div><div class=col>{{ plant.growth.join(', ') }}</div></div></div><div class=plant-thumb><img src=\"{{ thumbnail }}\"><div class=thumb-caption>{{ caption }}</div></div></ion-content></ion-view>"),a.put("app/components/plant/list.html",'<ion-view><ion-nav-title>TALL Plant List</ion-nav-title><ion-header-bar align-title=left class="bar-subheader bar-clear item-input-inset"><label class=item-input-wrapper><i class="icon ion-ios-search placeholder-icon"></i> <input type=search placeholder=Search ng-model=searchText> <button class="button ion-android-close button-dark button-clear" ng-show=searchText on-tap="searchText=\'\'"></button></label></ion-header-bar><ion-content><ion-list><ion-item collection-repeat="plant in plants | filter:searchText | orderBy:\'scientific\'" ui-sref=detail({code:plant.code}) ng-class="plant.idYear ? \'id-\' + plant.idYear : \'\'"><span class=col-code>{{ plant.code }}</span> <span class=col-scientific>{{ plant.scientific }}</span> <span class=col-growth><span ng-repeat="form in plant.growth" ng-class="\'growth-\' + form.toLowerCase().split(\'/\')[0]">{{ form == "Fern" ? "Fn" : form[0] }}</span></span></ion-item></ion-list></ion-content></ion-view>')}]);
//# sourceMappingURL=app.min.js.map